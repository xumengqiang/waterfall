(function(t){function i(i){for(var e,r,n=i[0],l=i[1],s=i[2],x=0,c=[];x<n.length;x++)r=n[x],Object.prototype.hasOwnProperty.call(f,r)&&f[r]&&c.push(f[r][0]),f[r]=0;for(e in l)Object.prototype.hasOwnProperty.call(l,e)&&(t[e]=l[e]);u&&u(i);while(c.length)c.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var t,i=0;i<o.length;i++){for(var a=o[i],e=!0,n=1;n<a.length;n++){var l=a[n];0!==f[l]&&(e=!1)}e&&(o.splice(i--,1),t=r(r.s=a[0]))}return t}var e={},f={app:0},o=[];function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,i,a){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)r.d(a,e,function(i){return t[i]}.bind(null,e));return a},r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="/waterfall/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=i,n=n.slice();for(var s=0;s<n.length;s++)i(n[s]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,i,a){t.exports=a("56d7")},"034f":function(t,i,a){"use strict";a("85ec")},"22a3":function(t,i,a){},"56d7":function(t,i,a){"use strict";a.r(i);a("e260"),a("e6cf"),a("cca6"),a("a79d");var e=a("2b0e"),f=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"app"}},[a("Waterfall")],1)},o=[],r=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"v-waterfall-content"},t._l(t.waterfallList,(function(i,e){return a("div",{key:e,staticClass:"v-waterfall-item",style:{top:i.top+"px",left:i.left+"px",width:t.waterfallImgWidth+"px",height:i.height+"px"}},[a("img",{attrs:{src:i.src,alt:""}})])})),0)},n=[],l=a("1da1");a("96cf"),a("3ca3"),a("ddb0"),a("d3b7"),a("fb6a");function s(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,a=null;return function(){var e=arguments;a&&clearTimeout(a),a=setTimeout((function(){t.apply(e)}),i)}}var u=["https://images.unsplash.com/photo-1555061012-7769779942ca?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1570535874313-8fd32014c6c8?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=635&q=80","https://images.unsplash.com/photo-1605187477857-e56a004da7fa?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1605187462912-78d43ddebf0f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1605187470006-6111814384f1?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1528249072419-472a928b71c9?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1591946931510-0f1b638a04f0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1558339136-19ee57afe7a6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1558339136-3b4e87294276?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1558339136-cf66f2a07b42?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1591947026851-2d50ab78eb9f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1572505185551-592ffdf667fb?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1574328495409-33bc8aff6d56?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1557743945-838dbf4efa59?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1591774921149-70c37a3fe407?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1596982288494-41e4edbf1047?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1565863097554-5febbdd412c3?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1585011070837-1bf8e294a858?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1607230404155-037ab8f77fda?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1609662998839-0767617004f3?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80","https://images.unsplash.com/photo-1598967313877-d9f9d9b59d8d?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=632&q=80","https://images.unsplash.com/photo-1625216787892-e5d34da44ee4?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80","https://images.unsplash.com/photo-1569294600898-7001ec6fe8a3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=651&q=80","https://images.unsplash.com/photo-1607960225324-653d9fd54440?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80","https://images.unsplash.com/photo-1568057599316-3ce26ff08520?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1298&q=80","https://images.unsplash.com/photo-1596459282241-74b55c45a202?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1489&q=80","https://images.unsplash.com/photo-1624024026315-7321eb088f8b?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1569295885897-7a9360290ca3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1335&q=80","https://images.unsplash.com/photo-1587888511321-4c5074d5fce0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80","https://images.unsplash.com/photo-1569407095890-41d8fca7a226?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=668&q=80","https://images.unsplash.com/photo-1567568730338-6234925ccb80?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1389&q=80","https://images.unsplash.com/photo-1623207598558-d522c788348f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80"],x=u,c={name:"v-waterfall",data:function(){return{waterfallImgWidth:250,waterfallImgCol:0,waterfallImgRight:10,waterfallImgBottom:10,imgArr:x,waterfallList:[],waterfallDeviationHeight:[]}},mounted:function(){var t=this;this.waterFall(),window.addEventListener("resize",s((function(){t.waterfallImgWidth=250,t.waterfallList=[],t.waterFall()}),1e3)),window.addEventListener("scroll",s((function(){t.onScroll()}),1e3))},methods:{waterFall:function(){var t=this.getClient().width-10;this.waterfallImgCol=parseInt(t/(this.waterfallImgWidth+this.waterfallImgRight)),this.waterfallImgWidth=parseInt(t%(this.waterfallImgWidth+this.waterfallImgRight)/this.waterfallImgCol)+this.waterfallImgWidth,this.waterfallDeviationHeight=new Array(this.waterfallImgCol);for(var i=0;i<this.waterfallDeviationHeight.length;i++)this.waterfallDeviationHeight[i]=0;this.imgPreloading()},imgPreloading:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var a,e;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=regeneratorRuntime.mark((function i(a){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,new Promise((function(i){var e=new Image;e.src=t.imgArr[a],e.onload=function(){var f={};f.height=t.waterfallImgWidth/e.width*e.height,f.src=t.imgArr[a],t.waterfallList.push(f),t.rankImg(f),i()}}));case 2:case"end":return i.stop()}}),i)})),e=0;case 2:if(!(e<t.imgArr.length)){i.next=7;break}return i.delegateYield(a(e),"t0",4);case 4:e++,i.next=2;break;case 7:case"end":return i.stop()}}),i)})))()},rankImg:function(t){var i=this.waterfallImgWidth,a=this.waterfallImgRight,e=this.waterfallImgBottom,f=this.waterfallDeviationHeight,o=this.waterfallDeviationHeight.indexOf(Math.min.apply(null,this.waterfallDeviationHeight));t.top=f[o],t.left=o*(a+i),f[o]+=t.height+e},getClient:function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},onScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop+document.documentElement.clientHeight>=document.documentElement.scrollHeight-100;t&&(console.log("到底了"),this.imgArr=x.slice(Math.round(10*Math.random()),Math.round(10*Math.random())+20),this.imgPreloading())}},destroyed:function(){window.removeEventListener("scroll",this.onScroll,!1),window.removeEventListener("resize",this.waterFall,!1)}},w=c,h=(a("d9bd"),a("2877")),p=Object(h["a"])(w,r,n,!1,null,null,null),d=p.exports,m={name:"App",components:{Waterfall:d}},b=m,g=(a("034f"),Object(h["a"])(b,f,o,!1,null,null,null)),H=g.exports;e["a"].config.productionTip=!1,new e["a"]({render:function(t){return t(H)}}).$mount("#app")},"85ec":function(t,i,a){},d9bd:function(t,i,a){"use strict";a("22a3")}});
//# sourceMappingURL=app.e904340e.js.map